<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–∞–ª–∞–Ω—Ç–æ–≤ –ê–ª–ª–æ–¥—ã 5.0.2</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a2e; 
            color: white; 
            padding: 20px;
        }
        
        /* –ö–ª–∞—Å—Å—ã */
        .class-selector { 
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .class-buttons { display: flex; flex-wrap: wrap; gap: 10px; }
        .class-btn { 
            padding: 12px 20px; 
            background: #4361ee; 
            border: none; 
            color: white; 
            border-radius: 8px; 
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .class-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4); }
        .class-btn.active { background: #f72585; box-shadow: 0 0 20px rgba(247, 37, 133, 0.5); }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .main-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }
        
        /* –í–µ—Ç–∫–∏ */
        .branches-container {
            display: grid;
            grid-template-columns: 400px 150px 150px 150px;
            gap: 15px;
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
        }
        
        /* –¢–∞–ª–∞–Ω—Ç—ã */
        .talent-branch { 
            background: rgba(255,255,255,0.1); 
            padding: 15px; 
            border-radius: 10px; 
        }
        .talent-branch h3 { 
            text-align: center; 
            margin-bottom: 15px; 
            color: #4cc9f0;
            border-bottom: 1px solid #4a5568;
            padding-bottom: 8px;
        }
        .talent-row { 
            display: flex; 
            justify-content: center; 
            gap: 8px; 
            margin-bottom: 12px; 
            min-height: 70px;
        }
        .talent { 
            width: 70px; 
            height: 70px; 
            background: linear-gradient(45deg, #2d3748, #4a5568);
            border: 2px solid #718096;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }
        .talent:hover { border-color: #4cc9f0; transform: scale(1.05); }
        .talent.active { background: linear-gradient(45deg, #7209b7, #3a0ca3); border-color: #f72585; }
        .talent.locked { opacity: 0.4; cursor: not-allowed; }
        .talent-level {
            position: absolute;
            bottom: 3px;
            right: 3px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }
        
        /* –í–µ—Ö–∏ - —É–≤–µ–ª–∏—á–µ–Ω—ã –≤ 5 —Ä–∞–∑ */
        .milestone-branch { 
            background: rgba(255,255,255,0.1); 
            padding: 15px; 
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .milestone-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(9, 1fr);
            gap: 3px;
            width: 150px;
            height: 150px;
        }
        .milestone {
            width: 15px;  /* –£–≤–µ–ª–∏—á–µ–Ω–æ –≤ 5 —Ä–∞–∑ */
            height: 15px; /* –£–≤–µ–ª–∏—á–µ–Ω–æ –≤ 5 —Ä–∞–∑ */
            background: #4a5568;
            border: 1px solid #718096;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .milestone:hover { border-color: #4cc9f0; transform: scale(1.2); }
        .milestone.active { background: #f72585; border-color: #f72585; }
        .milestone.locked { opacity: 0.3; cursor: not-allowed; }
        .milestone.start { background: #4cc9f0; border-color: #4cc9f0; }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        .info-panel {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            height: fit-content;
        }
        .points-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .points-box {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .points-box h4 {
            color: #4cc9f0;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .points-value {
            font-size: 24px;
            font-weight: bold;
            color: #f72585;
        }
        .points-total {
            font-size: 14px;
            color: #a0aec0;
        }
        
        .controls { display: flex; flex-direction: column; gap: 10px; }
        button { 
            padding: 12px; 
            background: #4361ee; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        button:hover { background: #3a56d4; transform: translateY(-2px); }
        
        #buildCode {
            width: 100%;
            height: 80px;
            margin-top: 15px;
            background: #2d3748;
            color: white;
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <h1>üéÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–∞–ª–∞–Ω—Ç–æ–≤ –ê–ª–ª–æ–¥—ã –û–Ω–ª–∞–π–Ω 5.0.2</h1>
    
    <div class="class-selector">
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å:</h3>
        <div class="class-buttons" id="classButtons"></div>
    </div>
    
    <div class="main-container">
        <div class="branches-container" id="branchesContainer"></div>
        
        <div class="info-panel">
            <div class="points-display">
                <div class="points-box">
                    <h4>–û—á–∫–∏ —Ç–∞–ª–∞–Ω—Ç–æ–≤</h4>
                    <div class="points-value" id="talentPoints">0</div>
                    <div class="points-total">–∏–∑ 30 –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                </div>
                <div class="points-box">
                    <h4>–û—á–∫–∏ –≤–µ—Ö</h4>
                    <div class="points-value" id="milestonePoints">0</div>
                    <div class="points-total">–∏–∑ 41 –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                </div>
            </div>
            
            <div class="controls">
                <button onclick="resetAll()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
                <button onclick="exportBuild()">üì§ –≠–∫—Å–ø–æ—Ä—Ç –±–∏–ª–¥–∞</button>
                <button onclick="importBuild()">üì• –ò–º–ø–æ—Ä—Ç –±–∏–ª–¥–∞</button>
            </div>
            
            <textarea id="buildCode" placeholder="–ö–æ–¥ –±–∏–ª–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å..." readonly></textarea>
        </div>
    </div>

    <script>
        // –î–ê–ù–ù–´–ï –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê - –ó–ê–ü–û–õ–ù–ò –≠–¢–û!
        const classes = {
            warrior: {
                name: "‚öîÔ∏è –í–æ–∏–Ω",
                talents: [
                    // –°—Ç—Ä–æ–∫–∞ 1
                    [
                        { id: "w1_1", name: "–°–∏–ª–∞ –æ—Ä—É–∂–∏—è", max: 3, req: [], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –∞—Ç–∞–∫–∏ –Ω–∞ 2% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w1_2", name: "–¢–≤–µ—Ä–¥–∞—è —Å—Ç–æ–π–∫–∞", max: 3, req: [], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –Ω–∞ 3% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w1_3", name: "–ë–æ–µ–≤–æ–π –¥—É—Ö", max: 3, req: [], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–∞ 2% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 2
                    [
                        { id: "w2_1", name: "–ú–æ—â–Ω—ã–π —É–¥–∞—Ä", max: 3, req: ["w1_1"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ –Ω–∞ 5% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w2_2", name: "–ñ–µ–ª–µ–∑–Ω–∞—è –≤–æ–ª—è", max: 3, req: ["w1_2"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç—Ä–æ–ª—é –Ω–∞ 4% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w2_3", name: "–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å", max: 3, req: ["w1_3"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è –Ω–∞ 3% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 3
                    [
                        { id: "w3_1", name: "–Ø—Ä–æ—Å—Ç—å", max: 3, req: ["w2_1"], desc: "–®–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 2% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w3_2", name: "–ù–µ—Å–æ–∫—Ä—É—à–∏–º–æ—Å—Ç—å", max: 3, req: ["w2_2"], desc: "–£–º–µ–Ω—å—à–∞–µ—Ç –ø–æ–ª—É—á–∞–µ–º—ã–π —É—Ä–æ–Ω –Ω–∞ 3% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w3_3", name: "–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è", max: 3, req: ["w2_3"], desc: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1% –∑–¥–æ—Ä–æ–≤—å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 4
                    [
                        { id: "w4_1", name: "–°–º–µ—Ä—Ç–µ–ª—å–Ω—ã–π —É–¥–∞—Ä", max: 3, req: ["w3_1"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–Ω –ø–æ —Ü–µ–ª—è–º —Å –Ω–∏–∑–∫–∏–º –∑–¥–æ—Ä–æ–≤—å–µ–º –Ω–∞ 8% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w4_2", name: "–©–∏—Ç –≤–æ–∑–º–µ–∑–¥–∏—è", max: 3, req: ["w3_2"], desc: "–ü—Ä–∏ –±–ª–æ–∫–µ –Ω–∞–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É—Ä–æ–Ω 50% –æ—Ç —Å–∏–ª—ã –∞—Ç–∞–∫–∏ –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w4_3", name: "–í—Ç–æ—Ä–æ–µ –¥—ã—Ö–∞–Ω–∏–µ", max: 3, req: ["w3_3"], desc: "–ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è –Ω–∏–∂–µ 30% —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –Ω–∞ 15% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 5
                    [
                        { id: "w5_1", name: "–†–∞–∑—Ä—É—à–∏—Ç–µ–ª—å", max: 3, req: ["w4_1"], desc: "–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç 10% –∑–∞—â–∏—Ç—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w5_2", name: "–ù–µ–ø—Ä–æ–±–∏–≤–∞–µ–º–∞—è –±—Ä–æ–Ω—è", max: 3, req: ["w4_2"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —â–∏—Ç–∞ –Ω–∞ 20% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w5_3", name: "–ù–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å", max: 3, req: ["w4_3"], desc: "–®–∞–Ω—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–µ–∂–∞—Ç—å —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞ 5% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 6
                    [
                        { id: "w6_1", name: "–ë–µ—Ä—Å–µ—Ä–∫", max: 3, req: ["w5_1"], desc: "–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–Ω –Ω–∞ 25% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w6_2", name: "–°—Ç–µ–Ω–∞ —â–∏—Ç–æ–≤", max: 3, req: ["w5_2"], desc: "–°–æ–∑–¥–∞–µ—Ç –∑–∞—â–∏—Ç–Ω—ã–π –±–∞—Ä—å–µ—Ä, –ø–æ–≥–ª–æ—â–∞—é—â–∏–π —É—Ä–æ–Ω" },
                        { id: "w6_3", name: "–§–µ–Ω–∏–∫—Å", max: 3, req: ["w5_3"], desc: "–ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ –µ—Å—Ç—å —à–∞–Ω—Å –≤–æ—Å–∫—Ä–µ—Å–Ω—É—Ç—å —Å 30% –∑–¥–æ—Ä–æ–≤—å—è –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 7
                    [
                        { id: "w7_1", name: "–ê–ø–æ—Ñ–µ–æ–∑", max: 3, req: ["w6_1"], desc: "–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞ 15% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w7_2", name: "–ù–µ–±–µ—Å–Ω—ã–π —â–∏—Ç", max: 3, req: ["w6_2"], desc: "–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ - —Å–æ–∑–¥–∞–µ—Ç –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w7_3", name: "–ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ", max: 3, req: ["w6_3"], desc: "–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–æ–µ –≤—ã–∂–∏–≤–∞–Ω–∏–µ - –≤–æ—Å–∫—Ä–µ—à–∞–µ—Ç —Å –ø–æ–ª–Ω—ã–º –∑–¥–æ—Ä–æ–≤—å–µ–º —Ä–∞–∑ –≤ –±–æ–π –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 8
                    [
                        { id: "w8_1", name: "–í–∏—Ö—Ä—å –∫–ª–∏–Ω–∫–æ–≤", max: 3, req: ["w7_1"], desc: "–ù–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω –≤—Å–µ–º –≤—Ä–∞–≥–∞–º –≤–æ–∫—Ä—É–≥ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É" },
                        { id: "w8_2", name: "–ó–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ", max: 3, req: ["w7_2"], desc: "–û–≥–ª—É—à–∞–µ—Ç –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤ –≤ —Ä–∞–¥–∏—É—Å–µ –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w8_3", name: "–ì–Ω–µ–≤ —Ç–∏—Ç–∞–Ω–∞", max: 3, req: ["w7_3"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∏ —É—Ä–æ–Ω –Ω–∞ 50% –Ω–∞ 10 —Å–µ–∫—É–Ω–¥ –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 9
                    [
                        { id: "w9_1", name: "–ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Å–∏–ª–∞", max: 3, req: ["w8_1"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Å—é —Å–∏–ª—É –∞—Ç–∞–∫–∏ –Ω–∞ 10% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w9_2", name: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞", max: 3, req: ["w8_2"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Å—é –∑–∞—â–∏—Ç—É –Ω–∞ 15% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "w9_3", name: "–í–µ—á–Ω–∞—è –∂–∏–∑–Ω—å", max: 3, req: ["w8_3"], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–∞ 20% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ],
                    // –°—Ç—Ä–æ–∫–∞ 10
                    [
                        { id: "w10_1", name: "–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –±–∏—Ç–≤—ã", max: 3, req: ["w9_1"], desc: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç - —É–¥–≤–∞–∏–≤–∞–µ—Ç –≤—Å—é —Å–∏–ª—É –∞—Ç–∞–∫–∏" },
                        { id: "w10_2", name: "–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π", max: 3, req: ["w9_2"], desc: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç - –¥–µ–ª–∞–µ—Ç –Ω–µ—É—è–∑–≤–∏–º—ã–º –Ω–∞ 5 —Å–µ–∫—É–Ω–¥" },
                        { id: "w10_3", name: "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π", max: 3, req: ["w9_3"], desc: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç - –≤–æ—Å–∫—Ä–µ—à–∞–µ—Ç –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ —Å –ø–æ–ª–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏" }
                    ]
                ],
                milestones: [
                    { name: "‚ö° –í–µ—Ö–∞ –°–∏–ª—ã", grid: createGrid() },
                    { name: "üõ°Ô∏è –í–µ—Ö–∞ –ó–∞—â–∏—Ç—ã", grid: createGrid() },
                    { name: "üéØ –í–µ—Ö–∞ –¢–∞–∫—Ç–∏–∫–∏", grid: createGrid() }
                ]
            },
            paladin: {
                name: "‚úùÔ∏è –ü–∞–ª–∞–¥–∏–Ω",
                talents: [
                    // –ó–∞–ø–æ–ª–Ω–∏ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –≤–æ–∏–Ω–æ–º...
                    [
                        { id: "p1_1", name: "–°–≤–µ—Ç–ª–∞—è —Å–∏–ª–∞", max: 3, req: [], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π –Ω–∞ 2% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" },
                        { id: "p1_2", name: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —â–∏—Ç", max: 3, req: [], desc: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –Ω–∞ 3% –∑–∞ —É—Ä–æ–≤–µ–Ω—å" }
                    ]
                    // ... –¥–æ–±–∞–≤—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ 9 —Å—Ç—Ä–æ–∫
                ],
                milestones: [
                    { name: "üåü –í–µ—Ö–∞ –°–≤–µ—Ç–∞", grid: createGrid() },
                    { name: "üõ°Ô∏è –í–µ—Ö–∞ –©–∏—Ç–∞", grid: createGrid() },
                    { name: "üôè –í–µ—Ö–∞ –í–µ—Ä—ã", grid: createGrid() }
                ]
            }
            // ... –¥–æ–±–∞–≤—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
        };

        function createGrid() {
            let grid = [];
            for (let i = 0; i < 9; i++) {
                let row = [];
                for (let j = 0; j < 9; j++) {
                    row.push({ 
                        id: `m${i}${j}`, 
                        active: false,
                        start: (i === 4 && j === 4)
                    });
                }
                grid.push(row);
            }
            return grid;
        }

        // –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        let currentClass = null;
        let talentPoints = 0;
        let milestonePoints = 0;
        const selectedTalents = {};
        const selectedMilestones = {};

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        function init() {
            createClassButtons();
        }

        function createClassButtons() {
            const container = document.getElementById('classButtons');
            for (const classId in classes) {
                const btn = document.createElement('button');
                btn.className = 'class-btn';
                btn.textContent = classes[classId].name;
                btn.onclick = () => selectClass(classId);
                container.appendChild(btn);
            }
        }

        function selectClass(classId) {
            currentClass = classId;
            talentPoints = 0;
            milestonePoints = 0;
            Object.keys(selectedTalents).forEach(key => delete selectedTalents[key]);
            Object.keys(selectedMilestones).forEach(key => delete selectedMilestones[key]);
            
            document.querySelectorAll('.class-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderBranches();
            updatePoints();
        }

        function renderBranches() {
            const container = document.getElementById('branchesContainer');
            container.innerHTML = '';
            
            const classData = classes[currentClass];
            
            // –í–µ—Ç–∫–∞ —Ç–∞–ª–∞–Ω—Ç–æ–≤
            const talentBranch = document.createElement('div');
            talentBranch.className = 'talent-branch';
            talentBranch.innerHTML = '<h3>üéØ –¢–∞–ª–∞–Ω—Ç—ã</h3>';
            
            classData.talents.forEach((row, rowIndex) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'talent-row';
                
                row.forEach(talent => {
                    const talentDiv = document.createElement('div');
                    talentDiv.className = 'talent';
                    const currentLevel = selectedTalents[talent.id] || 0;
                    const isLocked = talent.req.length > 0 && !talent.req.every(req => selectedTalents[req] > 0);
                    
                    if (currentLevel > 0) talentDiv.classList.add('active');
                    if (isLocked) talentDiv.classList.add('locked');
                    
                    talentDiv.innerHTML = `
                        <div>${talent.name}</div>
                        <div class="talent-level">${currentLevel}/${talent.max}</div>
                    `;
                    talentDiv.title = `${talent.name}\n${talent.desc}\n–£—Ä–æ–≤–µ–Ω—å: ${currentLevel}/${talent.max}`;
                    
                    talentDiv.onclick = () => toggleTalent(talent.id, talent.max, talent.req);
                    rowDiv.appendChild(talentDiv);
                });
                
                talentBranch.appendChild(rowDiv);
            });
            
            container.appendChild(talentBranch);
            
            // –í–µ—Ç–∫–∏ –≤–µ—Ö
            classData.milestones.forEach((milestone, index) => {
                const milestoneBranch = document.createElement('div');
                milestoneBranch.className = 'milestone-branch';
                milestoneBranch.innerHTML = `<h3>${milestone.name}</h3>`;
                
                const grid = document.createElement('div');
                grid.className = 'milestone-grid';
                
                milestone.grid.forEach((row, i) => {
                    row.forEach((cell, j) => {
                        const cellDiv = document.createElement('div');
                        cellDiv.className = 'milestone';
                        if (cell.start) cellDiv.classList.add('start');
                        if (selectedMilestones[cell.id]) cellDiv.classList.add('active');
                        
                        cellDiv.onclick = () => toggleMilestone(cell.id);
                        grid.appendChild(cellDiv);
                    });
                });
                
                milestoneBranch.appendChild(grid);
                container.appendChild(milestoneBranch);
            });
        }

        function toggleTalent(talentId, maxLevel, requirements) {
            if (talentPoints >= 30) return;
            
            const currentLevel = selectedTalents[talentId] || 0;
            const isLocked = requirements.length > 0 && !requirements.every(req => selectedTalents[req] > 0);
            
            if (isLocked) {
                alert('–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç–∞–ª–∞–Ω—Ç–∞!');
                return;
            }
            
            if (currentLevel < maxLevel) {
                selectedTalents[talentId] = currentLevel + 1;
                talentPoints++;
            } else {
                delete selectedTalents[talentId];
                talentPoints--;
            }
            
            updatePoints();
            renderBranches();
        }

        function toggleMilestone(milestoneId) {
            if (milestonePoints >= 41 && !selectedMilestones[milestoneId]) return;
            
            if (selectedMilestones[milestoneId]) {
                delete selectedMilestones[milestoneId];
                milestonePoints--;
            } else {
                selectedMilestones[milestoneId] = true;
                milestonePoints++;
            }
            
            updatePoints();
            renderBranches();
        }

        function updatePoints() {
            document.getElementById('talentPoints').textContent = talentPoints;
            document.getElementById('milestonePoints').textContent = milestonePoints;
        }

        function resetAll() {
            talentPoints = 0;
            milestonePoints = 0;
            Object.keys(selectedTalents).forEach(key => delete selectedTalents[key]);
            Object.keys(selectedMilestones).forEach(key => delete selectedMilestones[key]);
            updatePoints();
            renderBranches();
        }

        function exportBuild() {
            const build = {
                class: currentClass,
                talents: selectedTalents,
                milestones: selectedMilestones,
                talentPoints: talentPoints,
                milestonePoints: milestonePoints
            };
            document.getElementById('buildCode').value = btoa(JSON.stringify(build));
        }

        function importBuild() {
            const code = prompt('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –±–∏–ª–¥–∞:');
            if (code) {
                try {
                    const build = JSON.parse(atob(code));
                    currentClass = build.class;
                    Object.assign(selectedTalents, build.talents);
                    Object.assign(selectedMilestones, build.milestones);
                    talentPoints = build.talentPoints || 0;
                    milestonePoints = build.milestonePoints || 0;
                    updatePoints();
                    renderBranches();
                    alert('–ë–∏–ª–¥ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!');
                } catch (e) {
                    alert('–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –±–∏–ª–¥–∞.');
                }
            }
        }

        // –ó–∞–ø—É—Å–∫
        init();
    </script>
</body>
</html>
